---
layout: post  
title: "Домен tallinna.ru"  
date: 2020-05-17 11:29:20 +0200
categories: News
tags: 
- Blog
- GitHub
excerpt_separator: <!--more-->
---

Прикрепил доменное имя -- *tallinna.ru*  
Были определённые проблемы и сделано масса ошибок.

Во-первых, мой домен был прикреплён к хостингу, от которого я отказался 2 года назад.  
Во-вторых, мой регистратор изменился: все зарегистрированные домены переехали на *Reg.ru*. Если на *Naunet* я понимал, что надо делать и за 15 лет достаточно изучил админку, то на Reg.ru всё незнакомо и, я бы сказал, менее удачно, что ли. Это положение дел тоже затормозило основное дело.  
<!--more-->
В-третьих, Инструкции только на английском и несколько вариантов. В интернете ролики тоже о разном. Просмотрел 3-4 и сделал... по-другому.

В-чётвёртых, в Инструкции несколько вариантов присоединения пользовательского домена и меня интересовал именно это -- **Apex**. То есть типа *example.com*, без *www*

Теперь, отбросив все ошибки, что я совершил, опишу действия. Без конкретики: принципы.

01. Необходимо зарегистрировать или присоединить домен к существующему Хостеру. В Контрольной Панели Регистраторв (*Reg.ru*) я перенастроил *DNS*-ы на действующего Хостера. У меня он есть, но можно делать, как описано в роликах на *YouTube*: зарегистрировать домен (а то и бесплатно) и там же настраивать *DNS*. У моего Регистратора визуально-понятного Интерфейса я не нашёл, поэтому просто поставил данные хостера (*NS.xxxxx.com*, 3 штуки). Замечу, что, скорее всего, придётся ждать смену данных до 24 часов.  

02. Не дожидаясь смены данных, поднимаю *DNS*-ы в Контрольной Панели Хостера. Или пишете в Саппорт. Или вручную -- есть функция -- перенести домен. То есть Хостер присоединяет Домен к своему Серверу.

03. Я создал полноценный виртуальный домен с папкой на сервере и закачал туда тестовый *index.html*. Это сделано было для проверки, чтобы узнать, когда заработает домен на новом месте. Это можно котролировать и по [RIPN](http://www.ripn.su/nic/whois/) -- *WhoIs*. Пока сайт не появится ничего делать с *GitHub*-ом не надо.

04. Прошло время. Возможно, и 12-15 часов. Сайт заработал. Теперь надо добавить так называемый *ANAME* (*A*). Для этого захожу в настройки *DNS* уже нашего работающего домена и добавляю 4 *IP*.  
Важная ссылка -- [Configuring an apex domain](https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain)  
У Хостера к существующим добавляешь *A* запись (с пустым под-доменом) данные *IP*-адреса:  
185.199.108.153  
185.199.109.153  
185.199.110.153  
185.199.111.153  
Ещё пройдёт пол-часа, чтобы это сохранилось и подтверждилось у Хостера.

05. Проверям (см. ссылку выше) через Терминал (у меня *VS Code - WSL*), выполнив команду: `dig tallinna.ru +noall +answer`
Я проверял много раз и видел: *DNS*-ы меняются. Когда увидите наши 4 *IP*, то можно настраивать сам *GitHub*  

06. В *Setting*-ах сайта на *GitHub*-e ставим свой домен -- *tallinna.ru* -- и соглашаемся. Возможно, поначалу появится надписи, что *так делать нельзя и домен плохой*, но надо быть терпеливым и подождать.

07. Затем на локальном компьютере следует поменять в `_config.yml` *url* на *tallinna.ru*.  
А запись в *baseURL* я убрал вообще, даже слэш (/). Иначе могут не подкоючиться стили: всё проверяется локально `http://127.0.0.1:4000/`

08. После указания домена на GitHub-e, необходимо сделать `git pull`, чтобы обновления удалённого репозитория синхронизировались с локальным (добавится файл CNAME). И уже затем делаем `git push`

09. Наслаждаемся!
